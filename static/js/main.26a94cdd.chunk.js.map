{"version":3,"sources":["images/oval.svg","actions/actionCreators.js","reducers/fetchSelectFields.js","reducers/selectedField.js","reducers/fetchFieldData.js","reducers/index.js","store.js","components/FieldSelect.js","components/ResultCount.js","components/ResultsTable.js","components/Loading.js","components/Main.js","components/App.js","index.js"],"names":["module","exports","__webpack_require__","p","selectedField","type","requestFields","receiveFields","fields","error","fetchFields","dispatch","fetch","then","response","json","catch","receiveFieldData","items","resultCount","fetchFieldData","field","concat","sortedData","sort","a","b","count","data","resultLength","fullResults","trimmedResults","i","push","trimResults","length","fetchSelectFields","state","arguments","undefined","isFetching","action","Object","assign","value","rootReducer","combineReducers","loggerMiddleware","createLogger","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleware","SelectWrapper","styled","div","_templateObject","FieldSelect","event","target","react_default","createElement","this","props","onChange","handleChange","map","index","key","Component","StyledResult","ResultCount_templateObject","ResultCount","displayResultCount","ResultContainer","ResultsTable_templateObject","StyledResultTable","table","_templateObject2","ResultsTable","components_ResultCount","item","average_age","LoadingContainer","Loading_templateObject","Loading","src","loader","className","alt","GlobalStyle","createGlobalStyle","Main_templateObject","PageTitle","h1","Main_templateObject2","Main","components_Loading","message","components_FieldSelect","components_ResultsTable","App","connect","bindActionCreators","ReactDOM","render","es","HashRouter","basename","components_App","document","getElementById"],"mappings":"4EAAAA,EAAAC,QAAiBC,EAAAC,EAAuB,2LCGjC,SAASC,EAAcA,GAC5B,MAAO,CACLC,KAAM,qBACND,iBAIG,SAASE,IACd,MAAO,CACLD,KAAM,kBAIH,SAASE,EAAcC,EAAQC,GACpC,MAAO,CACLJ,KAAM,iBACNG,SACAC,SAIG,SAASC,IACd,OAAO,SAASC,GAEd,OADAA,EAfK,CACLN,KAAM,mBAeCO,IAAK,+DACTC,KACC,SAAAC,GACE,OAAOA,EAASC,QAElB,SAAAN,GACE,OAAOA,IAGVI,KAAK,SAAAE,GAAI,OAAIJ,EAASJ,EAAcQ,MACpCC,MAAM,SAAAP,GAAK,OAAIE,EAASJ,EAAc,GAAIE,OAU1C,SAASQ,EAAiBC,EAAOC,EAAaV,GACnD,MAAO,CACLJ,KAAM,qBACNa,QACAC,cACAV,SAIG,SAASW,EAAeC,GAC7B,OAAO,SAASV,GAEd,OADAA,EAhBK,CACLN,KAAM,uBAgBCO,IAAK,wDAAAU,OAC8CD,IAEvDR,KACC,SAAAC,GACE,OAAOA,EAASC,QAElB,SAAAN,GACE,OAAOA,IAGVI,KAAK,SAAAE,GACJ,IAAIQ,EAAyBR,EAWfS,KAAK,SAACC,EAAGC,GAC3B,OAAOA,EAAEC,MAAQF,EAAEE,QAXfhB,EACEM,EAcV,SAAqBW,EAAMC,GACzB,IAAMC,EAAcF,EACpB,GAAIC,EAAe,IAAK,CAGtB,IAFA,IAAIE,EAAiB,GAEZC,EAAI,EAAGA,GAAK,GAAIA,IACvBD,EAAeE,KAAKH,EAAYE,IAElC,OAAOD,EAET,OAAOD,EAxBkBI,CAAYX,EAAYR,EAAKoB,QAASpB,EAAKoB,WAG/DnB,MAAM,SAAAP,GAAK,OAAIE,EAASM,EAAiB,GAAI,EAAGR,sECpDxC2B,MAxBf,WAOE,IANAC,EAMAC,UAAAH,OAAA,QAAAI,IAAAD,UAAA,GAAAA,UAAA,GANQ,CACNE,YAAY,EACZhC,OAAQ,GACRC,MAAO,IAETgC,EACAH,UAAAH,OAAA,EAAAG,UAAA,QAAAC,EACA,OAAQE,EAAOpC,MACb,IAAK,iBACH,OAAOqC,OAAOC,OAAO,GAAIN,EAAO,CAC9BG,YAAY,IAEhB,IAAK,iBACH,OAAOE,OAAOC,OAAO,GAAIN,EAAO,CAC9BG,YAAY,EACZhC,OAAQiC,EAAOjC,OACfC,MAAOgC,EAAOhC,QAElB,QACE,OAAO4B,ICTEjC,MAXf,WAAsD,IAA/BiC,EAA+BC,UAAAH,OAAA,QAAAI,IAAAD,UAAA,GAAAA,UAAA,GAAvB,CAAEM,MAAO,IAAMH,EAAQH,UAAAH,OAAA,EAAAG,UAAA,QAAAC,EACpD,OAAQE,EAAOpC,MACb,IAAK,qBACH,OAAOqC,OAAOC,OAAO,GAAIN,EAAO,CAC9BO,MAAOH,EAAOrC,gBAElB,QACE,OAAOiC,ICmBEjB,MA1Bf,WAQE,IAPAiB,EAOAC,UAAAH,OAAA,QAAAI,IAAAD,UAAA,GAAAA,UAAA,GAPQ,CACNE,YAAY,EACZtB,MAAO,GACPC,YAAa,EACbV,MAAO,IAETgC,EACAH,UAAAH,OAAA,EAAAG,UAAA,QAAAC,EACA,OAAQE,EAAOpC,MACb,IAAK,qBACH,OAAOqC,OAAOC,OAAO,GAAIN,EAAO,CAC9BG,YAAY,IAEhB,IAAK,qBACH,OAAOE,OAAOC,OAAO,GAAIN,EAAO,CAC9BG,YAAY,EACZtB,MAAOuB,EAAOvB,MACdC,YAAasB,EAAOtB,YACpBV,MAAOgC,EAAOhC,QAElB,QACE,OAAO4B,ICXEQ,EANKC,YAAgB,CAClCV,oBACAhC,gBACAgB,mBCHI2B,EAAmBC,yBAEnBC,EAAmBC,OAAOC,sCAAwCC,IAOzDC,EALDC,YACZT,EACAI,EAAiBM,YAAgBC,IAAiBT,wwBCNpD,IAAMU,EAAgBC,IAAOC,IAAVC,KA8DJC,uLAtBAC,GACXT,EAAM1C,SAASP,EAAc0D,EAAMC,OAAOnB,QAC1CS,EAAM1C,SAASS,EAAe0C,EAAMC,OAAOnB,yCAI3C,OACEoB,EAAAvC,EAAAwC,cAACR,EAAD,KACEO,EAAAvC,EAAAwC,cAAA,UACErB,MAAOsB,KAAKC,MAAM/D,cAAcwC,MAChCwB,SAAUF,KAAKG,cAEfL,EAAAvC,EAAAwC,cAAA,UAAQrB,MAAM,IAAd,kBACCsB,KAAKC,MAAM3D,OAAO8D,IAAI,SAACjD,EAAOkD,GAAR,OACrBP,EAAAvC,EAAAwC,cAAA,UAAQO,IAAKD,GAAQlD,cAfPoD,wGCzC1B,IAAMC,EAAehB,IAAOvD,EAAVwE,KAsBHC,6LAjBMzD,GACjB,OAAIA,EAAc,IAChB,kBAAAG,OAAyBH,EAAzB,YAEA,eAAAG,OAAsBH,EAAtB,6CAKF,OACE6C,EAAAvC,EAAAwC,cAACS,EAAD,KACGR,KAAKW,mBAAmBX,KAAKC,MAAMhD,qBAZlBsD,ihBCH1B,IAAMK,EAAkBpB,IAAOC,IAAVoB,KAIfC,EAAoBtB,IAAOuB,MAAVC,KAyDRC,mLA5BX,OACEnB,EAAAvC,EAAAwC,cAACa,EAAD,KACEd,EAAAvC,EAAAwC,cAACmB,EAAD,CAAajE,YAAa+C,KAAKC,MAAMhD,cACrC6C,EAAAvC,EAAAwC,cAACe,EAAD,KACEhB,EAAAvC,EAAAwC,cAAA,aACED,EAAAvC,EAAAwC,cAAA,UACED,EAAAvC,EAAAwC,cAAA,eACAD,EAAAvC,EAAAwC,cAAA,mBACAD,EAAAvC,EAAAwC,cAAA,mBACAD,EAAAvC,EAAAwC,cAAA,2BAGJD,EAAAvC,EAAAwC,cAAA,aACGC,KAAKC,MAAMjD,MAAMoD,IAAI,SAACe,EAAMd,GAAP,OACpBP,EAAAvC,EAAAwC,cAAA,MAAIO,IAAKD,GACPP,EAAAvC,EAAAwC,cAAA,UAAKM,EAAQ,GACbP,EAAAvC,EAAAwC,cAAA,UAAKoB,EAAKhE,OACV2C,EAAAvC,EAAAwC,cAAA,UAAKoB,EAAK1D,OACVqC,EAAAvC,EAAAwC,cAAA,UAAKoB,EAAKC,0BApBCb,yWC/B3B,IAAMc,EAAmB7B,IAAOC,IAAV6B,KA4BPC,mLATX,OACEzB,EAAAvC,EAAAwC,cAACsB,EAAD,KACEvB,EAAAvC,EAAAwC,cAAA,OAAKyB,IAAKC,IAAQC,UAAU,iBAAiBC,IAAI,WACjD7B,EAAAvC,EAAAwC,cAAA,KAAG2B,UAAU,iBAAb,iCALcnB,8hBCbtB,IAAMqB,EAAcC,YAAHC,KAYXC,EAAYvC,IAAOwC,GAAVC,KA8CAC,+LAhCX/C,EAAM1C,SAASD,sCAIf,IAAMD,EAAQyD,KAAKC,MAAM1D,MAGzB,OAFmByD,KAAKC,MAAM3B,WAGrBwB,EAAAvC,EAAAwC,cAACoC,EAAD,MACE5F,EACFuD,EAAAvC,EAAAwC,cAAA,qBAAaxD,EAAM6F,SAGxBtC,EAAAvC,EAAAwC,cAAA,WACED,EAAAvC,EAAAwC,cAAC6B,EAAD,MACA9B,EAAAvC,EAAAwC,cAACgC,EAAD,yBACAjC,EAAAvC,EAAAwC,cAACsC,EAAD,CACE/F,OAAQ0D,KAAKC,MAAM3D,OACnBJ,cAAe8D,KAAKC,MAAM/D,gBAE3B8D,KAAKC,MAAMjD,MAAMiB,OAChB6B,EAAAvC,EAAAwC,cAACuC,EAAD,CACEtF,MAAOgD,KAAKC,MAAMjD,MAClBC,YAAa+C,KAAKC,MAAMhD,cAExB,aA3BKsD,aCEnB,IAKegC,GALHC,YAtBZ,SAAyBrE,GACvB,MAAO,CACL7B,OAAQ6B,EAAMD,kBAAkB5B,OAChCC,MAAO4B,EAAMD,kBAAkB3B,MAC/B+B,WAAYH,EAAMD,kBAAkBI,WACpCpC,cAAeiC,EAAMjC,cACrBc,MAAOmB,EAAMjB,eAAeF,MAC5BC,YAAakB,EAAMjB,eAAeD,cAItC,SAA4BR,GAC1B,OAAOgG,YACLjG,EACAJ,EACAC,EACAH,EACAgB,EACAT,IAIQ+F,CAGVN,IC9BFQ,IAASC,OACP7C,EAAAvC,EAAAwC,cAAC6C,EAAA,EAAD,CAAUzD,MAAOA,GACfW,EAAAvC,EAAAwC,cAAC8C,EAAA,EAAD,CAAQC,SAAS,KACfhD,EAAAvC,EAAAwC,cAACgD,GAAD,QAGJC,SAASC,eAAe","file":"static/js/main.26a94cdd.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/oval.6e6a6f12.svg\";","import fetch from \"cross-fetch\";\n\n//select a field\nexport function selectedField(selectedField) {\n  return {\n    type: \"SET_SELECTED_FIELD\",\n    selectedField\n  };\n}\n//request fields\nexport function requestFields() {\n  return {\n    type: \"REQUEST_FIELDS\"\n  };\n}\n//receive fields\nexport function receiveFields(fields, error) {\n  return {\n    type: \"RECEIVE_FIELDS\",\n    fields,\n    error\n  };\n}\n//fetch fields\nexport function fetchFields() {\n  return function(dispatch) {\n    dispatch(requestFields());\n    return fetch(`https://birdie-test-thibault-henry.herokuapp.com/api/fields`)\n      .then(\n        response => {\n          return response.json();\n        },\n        error => {\n          return error;\n        }\n      )\n      .then(json => dispatch(receiveFields(json)))\n      .catch(error => dispatch(receiveFields([], error)));\n  };\n}\n//request field data\nexport function requestFieldData() {\n  return {\n    type: \"REQUEST_FIELD_DATA\"\n  };\n}\n//receive field data\nexport function receiveFieldData(items, resultCount, error) {\n  return {\n    type: \"RECEIVE_FIELD_DATA\",\n    items,\n    resultCount,\n    error\n  };\n}\n//fetch field data\nexport function fetchFieldData(field) {\n  return function(dispatch) {\n    dispatch(requestFieldData());\n    return fetch(\n      `https://birdie-test-thibault-henry.herokuapp.com/api/${field}`\n    )\n      .then(\n        response => {\n          return response.json();\n        },\n        error => {\n          return error;\n        }\n      )\n      .then(json => {\n        let sortedData = sortByCount(json);\n        dispatch(\n          receiveFieldData(trimResults(sortedData, json.length), json.length)\n        );\n      })\n      .catch(error => dispatch(receiveFieldData({}, 0, error)));\n  };\n}\n\nfunction sortByCount(data) {\n  const unsortedData = data;\n  return unsortedData.sort((a, b) => {\n    return b.count - a.count;\n  });\n}\n\nfunction trimResults(data, resultLength) {\n  const fullResults = data;\n  if (resultLength > 100) {\n    let trimmedResults = [];\n\n    for (let i = 0; i <= 99; i++) {\n      trimmedResults.push(fullResults[i]);\n    }\n    return trimmedResults;\n  }\n  return fullResults;\n}\n","function fetchSelectFields(\n  state = {\n    isFetching: false,\n    fields: [],\n    error: {}\n  },\n  action\n) {\n  switch (action.type) {\n    case \"REQUEST_FIELDS\":\n      return Object.assign({}, state, {\n        isFetching: true\n      });\n    case \"RECEIVE_FIELDS\":\n      return Object.assign({}, state, {\n        isFetching: false,\n        fields: action.fields,\n        error: action.error\n      });\n    default:\n      return state;\n  }\n}\n\nexport default fetchSelectFields;\n","function selectedField(state = { value: \"\" }, action) {\n  switch (action.type) {\n    case \"SET_SELECTED_FIELD\":\n      return Object.assign({}, state, {\n        value: action.selectedField\n      });\n    default:\n      return state;\n  }\n}\n\nexport default selectedField;\n","function fetchFieldData(\n  state = {\n    isFetching: false,\n    items: [],\n    resultCount: 0,\n    error: {}\n  },\n  action\n) {\n  switch (action.type) {\n    case \"REQUEST_FIELD_DATA\":\n      return Object.assign({}, state, {\n        isFetching: true\n      });\n    case \"RECEIVE_FIELD_DATA\":\n      return Object.assign({}, state, {\n        isFetching: false,\n        items: action.items,\n        resultCount: action.resultCount,\n        error: action.error\n      });\n    default:\n      return state;\n  }\n}\n\nexport default fetchFieldData;\n","import { combineReducers } from \"redux\";\nimport fetchSelectFields from \"./fetchSelectFields\";\nimport selectedField from \"./selectedField\";\nimport fetchFieldData from \"./fetchFieldData\";\n\nconst rootReducer = combineReducers({\n  fetchSelectFields,\n  selectedField,\n  fetchFieldData\n});\n\nexport default rootReducer;\n","import thunkMiddleware from \"redux-thunk\";\nimport { createLogger } from \"redux-logger\";\nimport { createStore, applyMiddleware, compose } from \"redux\";\nimport rootReducer from \"./reducers/index\";\n\nconst loggerMiddleware = createLogger();\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst store = createStore(\n  rootReducer,\n  composeEnhancers(applyMiddleware(thunkMiddleware, loggerMiddleware))\n);\n\nexport default store;\n","import React, { Component } from \"react\";\nimport store from \"../store\";\nimport { selectedField, fetchFieldData } from \"../actions/actionCreators\";\nimport styled from \"styled-components\";\n\nconst SelectWrapper = styled.div`\n  position: relative;\n  border: 1px solid #ccc;\n  border-radius: 0px;\n  overflow: hidden;\n  width: 90%;\n  margin: 0 auto;\n  padding 5px 6px;\n\n  @media (min-width: 48em) {\n    width: 50%;\n  }\n\n  &:after {\n    content: '';\n    position: absolute;\n    right: 10px;\n    top: 50%;\n    transform: translateY(-50%);\n    width: 0;\n    height: 0;\n    border-left: 10px solid transparent;\n    border-right: 10px solid transparent;\n    border-top: 10px solid #666;\n  }\n\n  select {\n    width: 130%;\n    border: none;\n    background: transparent;\n    font-size: 24px;\n    font-family: \"Courier New\", Courier, monospace;\n  \n    &:focus {\n      outline: none;\n    }\n  }\n`;\n\nclass FieldSelect extends Component {\n  handleChange(event) {\n    store.dispatch(selectedField(event.target.value));\n    store.dispatch(fetchFieldData(event.target.value));\n  }\n\n  render() {\n    return (\n      <SelectWrapper>\n        <select\n          value={this.props.selectedField.value}\n          onChange={this.handleChange}\n        >\n          <option value=\"\">select a field</option>\n          {this.props.fields.map((field, index) => (\n            <option key={index}>{field}</option>\n          ))}\n        </select>\n      </SelectWrapper>\n    );\n  }\n}\n\nexport default FieldSelect;\n","import React, { Component } from \"react\";\nimport styled from \"styled-components\";\n\nconst StyledResult = styled.p`\n  font-size: 18px;\n`;\n\nclass ResultCount extends Component {\n  displayResultCount(resultCount) {\n    if (resultCount > 100) {\n      return `Showing 100 of ${resultCount} results`;\n    } else {\n      return `Showing all ${resultCount} results`;\n    }\n  }\n\n  render() {\n    return (\n      <StyledResult>\n        {this.displayResultCount(this.props.resultCount)}\n      </StyledResult>\n    );\n  }\n}\n\nexport default ResultCount;\n","import React, { Component } from \"react\";\nimport ResultCount from \"./ResultCount\";\nimport styled from \"styled-components\";\n\nconst ResultContainer = styled.div`\n  text-align: center;\n`;\n\nconst StyledResultTable = styled.table`\n  width: 100%;\n  text-align: left;\n  border-collapse: collapse;\n  border-spacing: 0;\n  border-top: 1px solid #ccc;\n\n  thead {\n    td {\n      font-size: 18px;\n      padding: 20px;\n    }\n  }\n\n  tbody {\n    tr:nth-child(2n + 1) {\n      td {\n        background-color: #e6f7ed;\n      }\n    }\n  }\n\n  td {\n    padding: 10px 20px;\n  }\n`;\n\nclass ResultsTable extends Component {\n  render() {\n    return (\n      <ResultContainer>\n        <ResultCount resultCount={this.props.resultCount} />\n        <StyledResultTable>\n          <thead>\n            <tr>\n              <td>#</td>\n              <td>Count</td>\n              <td>Field</td>\n              <td>Average Age</td>\n            </tr>\n          </thead>\n          <tbody>\n            {this.props.items.map((item, index) => (\n              <tr key={index}>\n                <td>{index + 1}</td>\n                <td>{item.field}</td>\n                <td>{item.count}</td>\n                <td>{item.average_age}</td>\n              </tr>\n            ))}\n          </tbody>\n        </StyledResultTable>\n      </ResultContainer>\n    );\n  }\n}\n\nexport default ResultsTable;\n","import React, { Component } from \"react\";\nimport styled from \"styled-components\";\nimport loader from \"../images/oval.svg\";\n\nconst LoadingContainer = styled.div`\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate3d(-50%, -50%, 0);\n  text-align: center;\n\n  .loading__image {\n    width: 50px;\n  }\n\n  .loading__text {\n    font-family: \"Courier New\", Courier, monospace;\n    font-size: 18px;\n  }\n`;\n\nclass Loading extends Component {\n  render() {\n    return (\n      <LoadingContainer>\n        <img src={loader} className=\"loading__image\" alt=\"loader\" />\n        <p className=\"loading__text\">Loading, Please wait.</p>\n      </LoadingContainer>\n    );\n  }\n}\n\nexport default Loading;\n","import React, { Component } from \"react\";\nimport FieldSelect from \"./FieldSelect\";\nimport ResultsTable from \"./ResultsTable\";\nimport Loading from \"./Loading\";\nimport store from \"../store\";\nimport { fetchFields } from \"../actions/actionCreators\";\nimport styled, { createGlobalStyle } from \"styled-components\";\n\nconst GlobalStyle = createGlobalStyle`\n  body {\n    font-family: \"Courier New\", Courier, monospace;\n    color: #1f1f1f;\n    margin: 0 15px 30px;\n\n    @media(min-width: 48em) {\n      margin: 0 30px 60px;\n    }\n  }\n`;\n\nconst PageTitle = styled.h1`\n  font-size: 38px;\n  text-align: center;\n  font-family: Georgia, \"Times New Roman\", Times, serif;\n  letter-spacing: -2px;\n  color: #ff7219;\n\n  @media (min-width: 48em) {\n    font-size: 50px;\n  }\n`;\n\nclass Main extends Component {\n  componentDidMount() {\n    store.dispatch(fetchFields());\n  }\n\n  render() {\n    const error = this.props.error;\n    const isFetching = this.props.isFetching;\n\n    if (isFetching) {\n      return <Loading />;\n    } else if (error) {\n      return <div>Error: {error.message}</div>;\n    } else {\n      return (\n        <div>\n          <GlobalStyle />\n          <PageTitle>Demographic Data</PageTitle>\n          <FieldSelect\n            fields={this.props.fields}\n            selectedField={this.props.selectedField}\n          />\n          {this.props.items.length ? (\n            <ResultsTable\n              items={this.props.items}\n              resultCount={this.props.resultCount}\n            />\n          ) : null}\n        </div>\n      );\n    }\n  }\n}\n\nexport default Main;\n","import { bindActionCreators } from \"redux\";\nimport { connect } from \"react-redux\";\nimport {\n  fetchFields,\n  receiveFields,\n  requestFields,\n  selectedField,\n  fetchFieldData\n} from \"../actions/actionCreators\";\n\nimport Main from \"./Main\";\n\nfunction mapStateToProps(state) {\n  return {\n    fields: state.fetchSelectFields.fields,\n    error: state.fetchSelectFields.error,\n    isFetching: state.fetchSelectFields.isFetching,\n    selectedField: state.selectedField,\n    items: state.fetchFieldData.items,\n    resultCount: state.fetchFieldData.resultCount\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n    fetchFields,\n    requestFields,\n    receiveFields,\n    selectedField,\n    fetchFieldData,\n    dispatch\n  );\n}\n\nconst App = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Main);\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { HashRouter as Router } from \"react-router-dom\";\nimport App from \"./components/App\";\nimport { Provider } from \"react-redux\";\nimport store from \"./store\";\n\nReactDOM.render(\n  <Provider store={store}>\n    <Router basename=\"/\">\n      <App />\n    </Router>\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}